import streamlit as st

st.set_page_config(page_title="í˜„ëŒ€ìë™ì°¨ ê´€ë¦¬ì í˜ì´ì§€", layout="wide")

# âœ… 1ï¸âƒ£ "í˜„ëŒ€ìë™ì°¨ ê´€ë¦¬ì í˜ì´ì§€" í—¤ë”
st.title("í˜„ëŒ€ìë™ì°¨ ê´€ë¦¬ì í˜ì´ì§€")
st.markdown("---")

# âœ… 2ï¸âƒ£ ìƒë‹¨ íƒ­ êµ¬ì„± (í”„ë¡œëª¨ì…˜ ì¡°íšŒ, í• ë¶€ ê³„ì‚°, PDF, ê³ ê° í™”ë©´ ì „ì†¡)
tab1, tab2, tab3, tab4 = st.tabs(["í”„ë¡œëª¨ì…˜ ì¡°íšŒ", "í• ë¶€ ê³„ì‚° ë° í˜œíƒ ë¹„êµ", "PDF ë‹¤ìš´ë¡œë“œ", "ê³ ê° í™”ë©´ ì „ì†¡"])

# âœ… 3ï¸âƒ£ í”„ë¡œëª¨ì…˜ ì¡°íšŒ (íƒ­ 1)
with tab1:
    # ğŸ”¹ ì„œë¸Œíƒ­ êµ¬ì„± (ê°œì¸ ê³ ê° vs ë²•ì¸ ê³ ê°)
    subtab1, subtab2 = st.tabs(["ê°œì¸ ê³ ê°", "ë²•ì¸ ê³ ê°"])

    with subtab1:
        col1, col2 = st.columns([1, 1.5])

        with col1:
            customer_name = st.text_input("ê³ ê° ì´ë¦„")
            selected_model = st.selectbox("ì°¨ëŸ‰ ëª¨ë¸ ì„ íƒ", [
                "Avante (CN7 N)", "Avante (CN7 HEV)", "Grandeur (GN7 HEV)",
                "G80 (RG3)", "Santa-Fe â„¢", "Santa-Fe (MX5 PHEV)", "Tucson (NX4 PHEV)",
                "Palisade (LX2)", "IONIQ (AE EV)", "IONIQ 6 (CE)", "NEXO (FE)",
                "G90 (HI)", "G70 (IK)", "i30 (PD)", "GV80 (RS4)", "G90 (RS4)"
            ])
            region = st.selectbox("ê±°ì£¼ ì§€ì—­ ì„ íƒ", [
                "ì„œìš¸íŠ¹ë³„ì‹œ", "ë¶€ì‚°ê´‘ì—­ì‹œ", "ëŒ€êµ¬ê´‘ì—­ì‹œ", "ì¸ì²œê´‘ì—­ì‹œ",
                "ê´‘ì£¼ê´‘ì—­ì‹œ", "ëŒ€ì „ê´‘ì—­ì‹œ", "ìš¸ì‚°ê´‘ì—­ì‹œ", "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ",
                "ê²½ê¸°ë„ ì„±ë‚¨ì‹œ", "ì¶©ì²­ë¶ë„ ì²­ì£¼ì‹œ", "ì¶©ì²­ë‚¨ë„ ì²œì•ˆì‹œ",
                "ì „ë¼ë¶ë„ ì „ì£¼ì‹œ", "ì „ë¼ë‚¨ë„ ëª©í¬ì‹œ", "ê²½ìƒë¶ë„ í¬í•­ì‹œ", "ê²½ìƒë‚¨ë„ ì°½ì›ì‹œ"
            ])
            is_rebuy = st.checkbox("ì¬êµ¬ë§¤ ê³ ê° ì—¬ë¶€")
            has_children = st.checkbox("ë‹¤ìë…€ í˜œíƒ ì ìš© (ë¯¸ì„±ë…„ì 3ëª… ì´ìƒ)")

        with col2:
            st.subheader("ê°œì¸ ê³ ê° í˜œíƒ ìƒì„¸")
            final_price = 41430000  # ì˜ˆì‹œ ê¸°ë³¸ ê°€ê²© (ì°¨ëŸ‰ ì„ íƒ ì‹œ ë³€ê²½)

            if has_children:
                st.write("- **ë‹¤ìë…€ ê°€êµ¬ í˜œíƒ ì ìš©:** ë¬´ì´ì í• ë¶€ ì œê³µ, ë’·ì¢Œì„ ëª¨ë‹ˆí„° 30% í• ì¸")
                final_price -= 1000000  # ë‹¤ìë…€ í˜œíƒ ì¶”ê°€ ê°ë©´

            if "IONIQ" in selected_model or "NEXO" in selected_model:
                ev_subsidy = {
                    "ì„œìš¸íŠ¹ë³„ì‹œ": 9000000, "ë¶€ì‚°ê´‘ì—­ì‹œ": 10500000, "ëŒ€êµ¬ê´‘ì—­ì‹œ": 11000000,
                    "ì¸ì²œê´‘ì—­ì‹œ": 10600000, "ê´‘ì£¼ê´‘ì—­ì‹œ": 11000000, "ëŒ€ì „ê´‘ì—­ì‹œ": 12000000,
                    "ìš¸ì‚°ê´‘ì—­ì‹œ": 10500000, "ê²½ê¸°ë„ ìˆ˜ì›ì‹œ": 10500000, "ê²½ê¸°ë„ ì„±ë‚¨ì‹œ": 11000000,
                    "ì¶©ì²­ë¶ë„ ì²­ì£¼ì‹œ": 14000000, "ì¶©ì²­ë‚¨ë„ ì²œì•ˆì‹œ": 14000000, "ì „ë¼ë¶ë„ ì „ì£¼ì‹œ": 15000000,
                    "ì „ë¼ë‚¨ë„ ëª©í¬ì‹œ": 15500000, "ê²½ìƒë¶ë„ í¬í•­ì‹œ": 13000000, "ê²½ìƒë‚¨ë„ ì°½ì›ì‹œ": 13000000
                }.get(region, 0)
                st.write(f"- **ì „ê¸°ì°¨ ë³´ì¡°ê¸ˆ:** ìµœëŒ€ {ev_subsidy:,.0f} ì› ì ìš©")
                final_price -= ev_subsidy  # ì „ê¸°ì°¨ ë³´ì¡°ê¸ˆ ì ìš©

            if is_rebuy:
                discount = {
                    "G80 (RG3)": 2000000, "GV80 (RS4)": 3000000,
                    "Palisade (LX2)": 1500000, "ìŠ¤íƒ€ë¦¬ì•„": 1500000
                }.get(selected_model, 0)
                if discount > 0:
                    st.write(f"- **ì¬êµ¬ë§¤ í• ì¸:** {discount:,.0f} ì› ì ìš©")
                    final_price -= discount
                else:
                    st.write("- **ì¬êµ¬ë§¤ í• ì¸:** í•´ë‹¹ ì°¨ì¢…ì€ ì¶”ê°€ í• ì¸ì´ ì—†ìŠµë‹ˆë‹¤.")

            st.write(f"**ìµœì¢… ì ìš© ê°€ê²©:** {final_price:,.0f} ì›")

    with subtab2:
        col3, col4 = st.columns([1, 1.5])

        with col3:
            st.write("ë²•ì¸ ê³ ê° ê´€ë ¨ ì…ë ¥ë€ (í•„ìš” ì‹œ ì¶”ê°€ ê°€ëŠ¥)")

        with col4:
            st.subheader("ë²•ì¸ ê³ ê° í˜œíƒ")
            st.write("""
            âœ… ë¶€ê°€ì„¸ í™˜ê¸‰ ë° ê°ê°€ìƒê° ì ìš© ê°€ëŠ¥  
            âœ… ë²•ì¸ ì°¨ëŸ‰ ë‹¨ì²´ ë³´í—˜ë£Œ í• ì¸ ì œê³µ  
            âœ… ìš´ìš© ë¦¬ìŠ¤ë¥¼ í†µí•œ ìœ ì§€ë¹„ ì ˆê° ë° ê´€ë¦¬ í¸ì˜ì„± ì œê³µ  
            """)

    st.markdown("---")

    # âœ… ì‚¬ìš©ìê°€ ì„ íƒí•œ í•­ëª© ì •ë¦¬
    st.subheader("ğŸ“Œ ì„ íƒí•œ í•­ëª© ì •ë¦¬")
    st.markdown(f"**ì°¨ëŸ‰:** {selected_model}")
    st.markdown(f"**ìµœì¢… ì ìš© ê°€ê²©:** {final_price:,.0f} ì›")
    if has_children:
        st.markdown(f"**ë‹¤ìë…€ í˜œíƒ ì ìš©:** âœ…")

    if "IONIQ" in selected_model or "NEXO" in selected_model:
        st.markdown(f"**ì „ê¸°ì°¨ ë³´ì¡°ê¸ˆ:** {ev_subsidy:,.0f} ì› ì ìš©")

    if is_rebuy:
        st.markdown(f"**ì¬êµ¬ë§¤ í• ì¸:** {discount:,.0f} ì› ì ìš©")

    # âœ… ë‹¤ìë…€ í˜œíƒ ì¶”ê°€ ì„ íƒ (4ê°€ì§€ ì¤‘ 2ê°€ì§€ ì„ íƒ ê°€ëŠ¥)
    if has_children:
        st.subheader("ğŸ“Œ ë‹¤ìë…€ ì¶”ê°€ í˜œíƒ ì„ íƒ (2ê°€ì§€ ì„ íƒ ê°€ëŠ¥)")
        options = [
            "í”„ë¦¬ë¯¸ì—„ ì¹´ì‹œíŠ¸ 1ê°œ ë¬´ë£Œ ì¦ì •",
            "ì°¨ëŸ‰ìš© ê³µê¸°ì²­ì •ê¸° ì œê³µ",
            "ë’·ì¢Œì„ ëª¨ë‹ˆí„° 50% í• ì¸",
            "ê°€ì¡± ì°¨ëŸ‰ ì •ê¸° ì ê²€ 1ë…„ ë¬´ë£Œ"
        ]
        selected_benefits = st.multiselect("ì¶”ê°€ í˜œíƒ ì„ íƒ", options, max_selections=2)

        if selected_benefits:
            st.markdown("**ì„ íƒí•œ ì¶”ê°€ í˜œíƒ:**")
            for benefit in selected_benefits:
                st.markdown(f"- {benefit}")

